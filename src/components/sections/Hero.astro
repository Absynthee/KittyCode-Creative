---
import { Image } from "astro:assets";
import Button from "@/components/ui/Button.astro";
import Input from "../ui/Input.astro";

import Kitty from "@/assets/images/kitty.gif";
import { ChevronLeft, EllipsisVertical } from "@lucide/astro";

interface Props {
  name: string;
  role?: string;
  tagline?: string;
  bio?: string;
  primaryCTA?: {
    text: string;
    href: string;
    variant?: "default" | "primary" | "secondary" | "outline" | "ghost";
  };
  secondaryCTA?: {
    text: string;
    href: string;
    variant?: "default" | "primary" | "secondary" | "outline" | "ghost";
  };
  class?: string;
}

const { name, role, tagline, bio, primaryCTA, secondaryCTA } = Astro.props;
---

<script>
  document.addEventListener("DOMContentLoaded", () => {
    import("@/lib/sparkly-text.js");
  });
</script>

<section id="hero" class="hero hero--fullwidth" aria-labelledby="hero-title">
  <div class="hero-container">
    <div class="hero-content">
      <div class="role-container">
        <sparkly-text
          number-of-sparkles="5"
          style="--sparkly-text-color: color-mix(in srgb, currentColor, var(--primary) 100%);"
        >
          <span class="hero-role">{role}</span>
        </sparkly-text>
      </div>

      <h1 class="hero-name" id="hero-title">{name}</h1>

      <p class="hero-bio">{bio}</p>

      {
        (primaryCTA || secondaryCTA) && (
          <div class="hero-buttons">
            {primaryCTA && (
              <Button
                href={primaryCTA.href}
                variant={primaryCTA.variant || "primary"}
                size="large"
              >
                {primaryCTA.text}
              </Button>
            )}

            {secondaryCTA && (
              <Button
                href={secondaryCTA.href}
                variant={secondaryCTA.variant || "outline"}
                size="large"
              >
                {secondaryCTA.text}
              </Button>
            )}
          </div>
        )
      }
    </div>
    <div class="phone-container">
      <div class="phone">
        <div class="phone-menu">
          <ChevronLeft class="menu-back-icon" size={28} />
          <div class="contact-info-container">
            <img src="/favicon.png" class="menu-avatar" />
            <div class="contact-info">
              <p class="name">KittyCode Creative</p>
              <p class="role">Available to Code</p>
            </div>
          </div>
          <EllipsisVertical class="menu-more-icon" size={28} />
        </div>
        <div class="chat-container">
          <div class="chat-user-2">Hey KittyCode, we need a new website!</div>
          <div class="chat-user-2">Are you available to take us on?</div>
          <div class="chat-user-1 chat-sticker">
            <Image
              class="typing-cat"
              src={Kitty}
              alt="Hero Background"
              height={100}
              width={100}
              loading="eager"
            />
          </div>
          <div class="chat-user-1">Hi there!</div>
          <div class="chat-user-1">
            Sure thing! We can create a bespoke website tailored to your needs.
          </div>
          <div class="chat-user-1">
            If you'd like to get a head-start, you can fill in our questionnaire
            form.
          </div>
          <div class="chat-user-1 chat-phone-link">
            Here's a link for you:
            <a class="phone-link" href="services/website-questionnaire"
              >kittycodecreative.com&sol; website-questionnaire</a
            >
          </div>

          <div class="chat-user-2">Awesome. Thank you, KittyCode! üòç</div>
        </div>
        <Input
          class="send-message-container"
          type="text"
          placeholder="Type your message..."
          aria-label="Type your message"
          variant="primary"
        />
      </div>
    </div>
  </div>

  <style>
    .hero {
      position: relative;
      overflow: hidden;
    }

    .hero--fullwidth {
      display: flex;
      margin: 0 auto;
      width: 100%;
      min-height: calc(100vh - 332px);
    }

    .typing-cat {
      place-self: center;
      animation: slideInDown 0.8s ease-out 0.2s both;
      user-select: none;
    }

    .hero-container {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: 2fr 1fr;
      width: 100%;
      /* max-width: 1200px; */
      align-items: center;
      margin: 0 auto;
      padding: 6rem 3rem;
    }

    .hero-content {
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      max-width: 1000px;
      padding: 2rem;
    }

    .hero-name {
      color: var(--foreground);
      font-size: calc(var(--step-4) * 2);
      background: linear-gradient(
        135deg,
        var(--secondary) 0%,
        var(--primary) 30%,
        var(--primary) 60%,
        var(--secondary) 100%
      );
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 300% 300%;
      /* padding-top: 1rem; */
      padding-bottom: 2rem;

      animation:
        gradientShift 20s ease-in-out infinite,
        slideInUp 0.8s ease-out 0.3s both;
    }

    .hero-tagline {
      font-size: var(--step-1);
      font-weight: 500;
      color: hsl(from var(--foreground) h s l / 0.8);
      line-height: 1.4;
      max-width: 62ch;
      text-wrap: balance;
      animation: fadeInUp 0.8s ease-out 0.6s both;
      padding-bottom: 2rem;
    }

    .hero-bio {
      font-size: var(--step-0);
      color: hsl(from var(--foreground) h s l / 0.8);
      max-width: 75ch;
      animation: fadeInUp 0.8s ease-out 0.8s both;
    }

    .hero-buttons {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      animation: fadeInUp 0.8s ease-out 1.4s both;
    }

    /* Animations */
    @keyframes gradientShift {
      0%,
      100% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
    }

    @keyframes slideInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes shimmer {
      0%,
      100% {
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
    }

    /* Responsive design */
    @media screen and (max-width: 1200px) {
      .hero-container {
        padding: 4rem 2rem;
      }

      .hero-content {
        max-width: 900px;
      }
    }

    @media screen and (max-width: 768px) {
      .hero-container {
        padding: 2rem 1rem 8rem 1rem;
      }

      .hero-content {
        gap: 2.5rem;
      }

      .hero-name {
        font-size: var(--step-6);
      }

      .hero-buttons {
        gap: var(--space-2xs);
      }

      .hero-tagline {
        font-size: var(--step-0);
      }

      .hero-buttons {
        align-items: center;
      }

      .hero-buttons :global(.btn) {
        max-width: 300px;
      }
    }

    @media screen and (max-width: 480px) {
      .hero-container {
        padding: 2rem 1rem;
      }

      .hero-content {
        padding-bottom: 10rem;
      }

      .hero-bio {
        line-height: 1.4;
      }
    }

    .phone-container {
      width: 25rem;
      aspect-ratio: 9 / 18.4;
      outline: 1rem solid light-dark(var(--foreground), var(--card));
      border-radius: 2rem;
      line-height: 1.2;
      /* transition: all 0.3s ease-in-out; */
      z-index: 10;
      scale: 95%;
    }

    .phone {
      display: block;
      position: relative;
      background-color: hsl from(var(--border) h s l / 0.5);
      height: 100%;
      width: 100%;
      border-radius: 1rem;
      z-index: -1;
    }

    .phone-menu {
      display: flex;
      position: relative;
      align-items: center;
      justify-content: space-evenly;
      color: var(--white);
      border-radius: 1rem 1rem 0 0;
      height: 5rem;
      width: 100%;
      background: linear-gradient(-90deg, var(--primary), var(--secondary));
      z-index: -1;
      margin-bottom: 1rem;
    }

    .menu-avatar {
      height: 40px;
      width: 40px;
      aspect-ratio: 1 / 1;
      margin-inline-end: 1rem;
    }

    .contact-info-container {
      display: flex;
      user-select: none;
    }

    .contact-info {
      min-width: 180px;
    }

    p.name {
      font-size: 1rem;
      font-weight: 700;
      line-height: clamp(130%, 0.9vw, 140%);
      color: var(--background);
    }

    p.role {
      font-size: 0.75rem;
      line-height: 1;
      color: var(--background);
    }

    .chat-container {
      position: relative;
      display: grid;
      padding-inline: 1rem;
    }

    .chat-user-1 {
      display: flex;
      justify-content: start;
      text-align: left;
      width: fit-content;
      max-width: 25ch;
      margin-block-end: var(--space-2xs);
      padding-block: var(--space-2xs);
      padding-inline: var(--space-2xs);
      background-color: var(--secondary);
      border-radius: 12px 12px 12px 2px;
      color: var(--foreground);
    }

    .chat-sticker {
      background-color: var(--transparent);
    }

    .chat-phone-link {
      display: block;
    }

    .phone-link {
      font-size: inherit;
      color: inherit;
      text-decoration: underline;
      font-weight: 600;
    }

    .chat-user-2 {
      position: relative;
      display: flex;
      text-align: right;
      width: fit-content;
      max-width: 25ch;
      margin-block-end: var(--space-2xs);
      padding-block: var(--space-2xs);
      padding-inline: var(--space-2xs);
      background-color: var(--accent-3-background);
      color: var(--foreground);
      border-radius: 12px 12px 2px 12px;
      place-self: end;
    }

    .phone-link:hover {
      color: var(--white);
    }

    .send-message-container {
      position: absolute;
      display: flex;
      margin: auto;
      width: 90%;
      margin-inline: 5%;
      padding-inline: 1rem;
      align-items: center;
      bottom: 1rem;
    }
  </style>
</section>
